 GitHub Copilot Instructions

## 📱 Projecte: Mushroom Finder

Una aplicació mòbil híbrida amb Ionic React per trobar i compartir ubicacions de bolets.

## 🏗️ Arquitectura del Projecte

### Tecnologies principals

- **Framework**: Ionic React + TypeScript
- **Build Tool**: Vite
- **Autenticació**: Firebase Auth
- **Routing**: React Router
- **Estils**: CSS + Variables CSS d'Ionic

### Estructura de carpetes

```
src/
├── components/       # Components reutilitzables (AuthGuard, LogoutButton)
├── pages/           # Pàgines de l'aplicació (Map, AddLocation, Profile, Login)
├── routes/          # Configuració de routes centralitzada
├── services/        # Serveis (authService per Firebase)
├── contexts/        # React Contexts (AuthContext)
├── config/          # Configuració (firebase.ts amb variables d'entorn)
└── theme/          # Variables CSS personalitzades
```

## 🎯 Convencions del Projecte

### Nomenclatura

- **Components**: PascalCase (ex: `AuthGuard`, `LogoutButton`)
- **Pàgines**: PascalCase (ex: `Map`, `AddLocation`)
- **Fitxers**: camelCase per utils, PascalCase per components
- **Variables d'entorn**: `VITE_` prefix obligatori
- **CSS classes**: kebab-case

### Idioma

- **Codi i comentaris**: Anglès per funcions i variables
- **Textos d'usuari**: Català
- **Documentació**: Català

### Patrons de codi

- Utilitza `React.FC` per components funcionals
- Hook `useAuth()` per gestionar autenticació
- Variables d'entorn amb `import.meta.env.VITE_*`
- Gestió d'errors amb try/catch i missatges en català

## 🔐 Autenticació

### Flux d'autenticació

1. `AuthProvider` envolta tota l'app
2. `AuthGuard` protegeix les routes privades
3. `useAuth()` hook per accedir a l'estat d'auth
4. `authService` gestiona les operacions Firebase

### Components d'autenticació

- `Login.tsx`: Pàgina de login/registre
- `AuthGuard.tsx`: Protecció de routes
- `LogoutButton.tsx`: Botó de logout amb confirmació
- `AuthContext.tsx`: Context global d'autenticació

## 🧭 Routes

### Sistema de routes

- Configuració centralitzada a `src/routes/routes.tsx`
- Routes dinàmiques generades des d'array de configuració
- TabBar dinàmica amb botó de logout integrat
- Protecció automàtica amb AuthGuard

### Routes disponibles

- `/map` - Pàgina del mapa (privada)
- `/add-location` - Afegir nova ubicació (privada)
- `/profile` - Perfil d'usuari (privada)
- Login automàtic si no autenticat

## 🎨 Estils i UI

### Components Ionic utilitzats

- `IonPage`, `IonHeader`, `IonContent` per estructura
- `IonTabs`, `IonTabBar`, `IonRouterOutlet` per navegació
- `IonCard`, `IonButton`, `IonInput` per formularis
- `IonToast`, `IonAlert`, `IonLoading` per feedback

### Variables CSS personalitzades

- Utilitzar variables CSS d'Ionic: `var(--ion-color-primary)`
- Classes personalitzades amb prefix del component
- Responsive design amb CSS Grid i Flexbox

## 🔧 Configuració

### Variables d'entorn

Totes les variables sensibles a `.env`:

- `VITE_FIREBASE_*` per configuració Firebase
- `VITE_APP_*` per metadades de l'aplicació

### Firebase

- Configuració a `src/config/firebase.ts`
- Utilitza variables d'entorn per seguretat
- Auth, Analytics configurat

## 📝 Suggeriments per Copilot

### Quan generes codi nou:

1. **Utilitza TypeScript** amb tipus explícits
2. **Segueix els patrons** existents del projecte
3. **Integra amb l'autenticació** si és necessari
4. **Utilitza components Ionic** per consistència
5. **Afegeix gestió d'errors** adequada
6. **Textos en català** per l'usuari final

### Exemples de bones pràctiques:

```typescript
// ✅ Component amb tipus i hook d'auth
const MyComponent: React.FC = () => {
  const { user, loading } = useAuth();

  if (loading) return <IonSpinner />;

  return (
    <IonPage>
      <IonContent>{/* contingut */}</IonContent>
    </IonPage>
  );
};

// ✅ Gestió d'errors en català
try {
  await authService.login(email, password);
} catch (error) {
  setToastMessage("Error d'autenticació: " + error.message);
}
```

### Evita:

- Hardcodejar URLs o configuracions
- Barrejar anglès i català en textos d'usuari
- Components sense tipus TypeScript
- Lògica d'autenticació fora del sistema existent

## 🚀 Funcionalitats principals

### Implementades

- ✅ Sistema d'autenticació complet
- ✅ Routes protegides
- ✅ Navegació amb tabs
- ✅ Variables d'entorn segures
- ✅ Estructura escalable

### Per implementar (suggeriments)

- 🔄 Integració amb mapes (Google Maps/Leaflet)
- 🔄 Base de dades per ubicacions (Firestore)
- 🔄 Càmera per fotos de bolets
- 🔄 Geolocalització
- 🔄 Compartir ubicacions
- 🔄 Perfil d'usuari editable

Utilitza aquestes instruccions per generar codi consistent amb l'arquitectura i estil del projecte!
