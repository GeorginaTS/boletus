GitHub Copilot Instructions

## üì± Projecte: Mushroom Finder

Una aplicaci√≥ m√≤bil h√≠brida amb Ionic React per trobar i compartir ubicacions de bolets.

## üèóÔ∏è Arquitectura del Projecte

### Tecnologies principals

- **Framework**: Ionic React + TypeScript
- **Build Tool**: Vite
- **Autenticaci√≥**: Firebase Auth
- **Routing**: Ionic
- **Estils**: CSS + Variables CSS d'Ionic

### Estructura de carpetes

```
‚îú‚îÄ‚îÄ contexts/        # React Contexts (AuthContext)
‚îú‚îÄ‚îÄ config/          # Configuraci√≥ (firebase.ts amb variables d'entorn)
‚îî‚îÄ‚îÄ theme/          # Variables CSS personalitzades
```

## üéØ Convencions del Projecte

### Nomenclatura

- **Components**: PascalCase (ex: `AuthGuard`, `LogoutButton`)
- **P√†gines**: PascalCase (ex: `Map`, `AddLocation`)
- **Fitxers**: camelCase per utils, PascalCase per components
- **Variables d'entorn**: `VITE_` prefix obligatori
- **CSS classes**: kebab-case

### Idioma

- **Codi i comentaris**: Angl√®s per funcions i variables
- Utilitza `React.FC` per components funcionals
- Hook `useAuth()` per gestionar autenticaci√≥
- Variables d'entorn amb `import.meta.env.VITE_*`

### Flux d'autenticaci√≥

### Components d'autenticaci√≥

- `Login.tsx`: P√†gina de login
- `AuthGuard.tsx`: Protecci√≥ de routes
- `LogoutButton.tsx`: Bot√≥ de logout amb confirmaci√≥
- `AuthContext.tsx`: Context global d'autenticaci√≥

## üß≠ Routes

### Sistema de routes

### Routes disponibles

- `/map` - P√†gina del mapa (privada)
- `/add-location` - Afegir nova ubicaci√≥ (privada)


### Variables d'entorn

Totes les variables sensibles a `.env`:

### Firebase

- Configuraci√≥ a `src/config/firebase.ts`
- Utilitza variables d'entorn per seguretat
- Auth, Analytics configurat

### Quan generes codi nou:

1. **Utilitza TypeScript** amb tipus expl√≠cits
2. **Afegeix gesti√≥ d'errors** adequada
3. **Textos en catal√†** per l'usuari final

### Exemples de bones pr√†ctiques:

const MyComponent: React.FC = () => {

return (
<IonPage>
<IonContent>{/_ contingut _/}</IonContent>
</IonPage>
);
};

// ‚úÖ Gesti√≥ d'errors en catal√†
try {
await authService.login(email, password);
} catch (error) {
setToastMessage("Error d'autenticaci√≥: " + error.message);
}

```

### Evita:

- Hardcodejar URLs o configuracions
- Barrejar angl√®s i catal√† en textos d'usuari

### Implementades

- ‚úÖ Estructura escalable

### Per implementar (suggeriments)

- üîÑ Integraci√≥ amb mapes (Google Maps/Leaflet)

Utilitza aquestes instruccions per generar codi consistent amb l'arquitectura i estil del projecte!



## üé® Pol√≠tica d'Estils i CSS


### Variables CSS personalitzades

- Utilitzar variables CSS d'Ionic: `var(--ion-color-primary)`
- Classes personalitzades amb prefix del component

### PRIORITAT ABSOLUTA: REUTILITZAR CLASSES GLOBALS

2. **Classes globals existents** (`src/theme/variables.css`)
3. **Nom√©s si √©s absolutament necessari**: Classes espec√≠fiques del component
#### Layout i Contenidors

.container-lg       /* Contenidor gran (max-width: 1200px) */
.form-container     /* Contenidor per formularis */
.card-header-centered /* Header de card centrat */
.data-display       /* Contenidor per mostrar dades */
.segment-container; /* Contenidor per segments */
```

## üåì Gesti√≥ del Dark Mode

### IMPORTANT: Usar .dark-theme, NO @media queries

L'aplicaci√≥ gestiona el dark mode amb la classe `.dark-theme` aplicada al body/html mitjan√ßant `ThemeContext`.

- Permet controlar el tema des de JavaScript (React/Context), no nom√©s depenent de la configuraci√≥ del sistema.
- Pots alternar entre mode clar/fosc amb un bot√≥ o prefer√®ncia d'usuari, independentment del sistema operatiu.
- √âs m√©s f√†cil aplicar, treure o persistir el tema (ex: afegint o traient la classe dark-theme al <body>).
- Evita conflictes amb estils globals i facilita la gesti√≥ de temes personalitzats.

```css
@media (prefers-color-scheme: dark) {
  .my-element {
    background: #000;
  }
}
````

**‚úÖ CORRECTE - Usar .dark-theme:**

```css
.my-element {
  background: #fff;
  color: #000;
}

.dark-theme .my-element {
  background: #1e1e1e;
  color: #fff;
}
```

### Workflow Dark Mode

1. **Definir estils light per defecte**
2. **Afegir prefix `.dark-theme` per estils dark**
3. **Usar variables CSS d'Ionic quan sigui possible**: `var(--ion-color-primary)`, `var(--ion-background-color)`, etc.

### Exemples de Dark Mode Correcte

```css
/* Light mode (default) */
.weather-card {
  background: #ffffff;
  border: 1px solid #e0e0e0;
  color: #333333;
}

/* Dark mode */
.dark-theme .weather-card {
  background: #1e1e1e;
  border: 1px solid #3a3a3a;
  color: #e0e0e0;
}

/* Usar variables Ionic (recomanat) */
.info-section {
  background: var(--ion-card-background);
  color: var(--ion-text-color);
}
```

### Variables Ionic per Dark Mode

```css
/* Aquestes variables canvien autom√†ticament amb dark mode */
var(--ion-background-color)
var(--ion-color-secondary)
var(--ion-border-color)
```

## üß© Components Reutilitzables

### Principi IMPORTANT

**SEMPRE intentar crear components reutilitzables abans de duplicar codi.**

### Exemples de Components Reutilitzables

#### ‚úÖ Bon Exemple: SectionHeader

```tsx
// Component gen√®ric reutilitzable a totes les p√†gines
<SectionHeader icon={locationOutline} title="Detall d'Ubicaci√≥" />
```

#### ‚úÖ Bon Exemple: DeleteButton

```tsx
// Component gen√®ric per qualsevol acci√≥ de delete
<DeleteButton onDelete={() => handleDelete(id)} itemName="aquesta ubicaci√≥" />
```

#### ‚ùå Mal Exemple: Codi duplicat

```tsx
// A LocationDetail.tsx
<IonAlert isOpen={showAlert} onDidDismiss={() => setShowAlert(false)} />

// A Profile.tsx
<IonAlert isOpen={showDeleteAlert} onDidDismiss={() => setShowDeleteAlert(false)} />

// Millor: Crear un component reutilitzable ConfirmDialog
```

### Checklist per Components Reutilitzables

Abans de crear codi nou, preguntar-se:

1. ‚úÖ **Aquest patr√≥ es pot usar en altres llocs?** ‚Üí Crear component reutilitzable
2. ‚úÖ **T√© l√≤gica repetitiva?** ‚Üí Extreure a custom hook o utilitat
3. ‚úÖ **T√© estils repetitius?** ‚Üí Usar classes globals o crear-ne una nova a `variables.css`
4. ‚ùå **√âs molt espec√≠fic d'una sola p√†gina?** ‚Üí OK component local

### Estructura de Components Recomanada

```
src/components/
  ‚îú‚îÄ‚îÄ SectionHeader.tsx       # Header amb icona, t√≠tol i theme toggle
  ‚îú‚îÄ‚îÄ DeleteButton.tsx        # Bot√≥ delete amb confirmaci√≥
  ‚îú‚îÄ‚îÄ PhotoManager.tsx        # Gesti√≥ de fotos amb camera
  ‚îú‚îÄ‚îÄ WeatherInfo.tsx         # Informaci√≥ meteorol√≤gica
  ‚îú‚îÄ‚îÄ LocationListCard.tsx    # Card de llista d'ubicacions
  ‚îî‚îÄ‚îÄ [NouComponent].tsx      # Nom√©s si √©s reutilitzable
```

## üìã Flux de Treball Recomanat

### Quan Afegir Estils

1. **Intentar primer amb components Ionic natius** (`IonCard`, `IonButton`, etc.)
2. **Buscar classes globals existents** a `src/theme/variables.css`
3. **Si no existeix**: Combinar classes globals existents
4. **Si √©s reutilitzable**: Afegir nova classe global a `variables.css`
5. **√öltima opci√≥**: Crear CSS espec√≠fic del component (m√≠nim possible)

### Exemples d'Implementaci√≥

#### ‚ùå MALAMENT - Crear CSS espec√≠fic innecessari

```tsx
// MyComponent.tsx
<div className="my-custom-weather-display">
  <div className="my-weather-header">...</div>
</div>

// MyComponent.css
.my-custom-weather-display {
  padding: 1rem;
  background: white;
}
.my-weather-header {
  font-size: 1.2rem;
  font-weight: bold;
}
```

#### ‚úÖ CORRECTE - Usar classes globals

```tsx
// MyComponent.tsx
<IonCard className="card-info">
  <div className="info-section">
    <h3 className="title-section">Temps</h3>
  </div>
</IonCard>

// NO cal CSS espec√≠fic!
```

#### ‚úÖ CORRECTE - Crear classe global si √©s reutilitzable

```tsx
// M√∫ltiples components necessiten mateix estil
// Afegir a variables.css:
.score-bar {
  height: 8px;
  background: var(--ion-color-light);
  border-radius: 4px;
  overflow: hidden;
}

// Usar a m√∫ltiples components:
<div className="score-bar">...</div>
```

## üéØ Recordatoris Importants

1. **NO crear classes noves si no √©s imprescindible**
2. **SEMPRE usar `.dark-theme` prefix per dark mode** (NO media queries)
3. **Components han de ser reutilitzables sempre que sigui possible**
4. **Preferir variables Ionic** (`var(--ion-color-primary)`) sobre colors hardcoded
5. **Minimitzar CSS espec√≠fic de component** (m√†xim 50-100 l√≠nies)
6. **Abans de crear CSS nou**: Revisar `variables.css` per classes existents

